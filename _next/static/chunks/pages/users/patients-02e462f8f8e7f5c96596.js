(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3807],{91342:function(e,t,n){"use strict";n.d(t,{SA:function(){return p},ko:function(){return d},FC:function(){return v}});var r=n(87757),o=n.n(r),u=n(92137),i=n(85893),s=n(8286),a=n(67294),l=n(66199),c=n(67102),f=n(57714);function p(e){return(0,i.jsx)(s.Z,{fullWidth:!0,variant:"outlined",onChange:function(t){var n,r={formResults:{some:{title:{startsWith:"\ud658\uc790 \uae30\ubcf8\uc815\ubcf4"},outputs:{some:{label:{startsWith:"\ud658\uc790 \uc131\ud568"},values:{equals:[t.target.value]}}}}}};e.onChange(r),null===(n=e.onChangeValue)||void 0===n||n.call(e,t.target.value)},label:"\ud658\uc790\uba85"})}function d(e){var t=(0,l.Z)(),n=t.fetchHospitals,r=t.hospitals;(0,a.useEffect)((function(){s()}),[]);var s=function(){var e=(0,u.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=(0,a.useMemo)((function(){return[{label:"\uc804\uccb4",value:void 0}].concat(r.map((function(e){return{label:e.name,value:e.id}})))}),[r]);return(0,i.jsx)(f.Z,{title:"\ubcd1\uc6d0",options:c,onChangeValue:function(t){if(t){var n={escorts:{some:{hospitalId:{equals:t}}}};e.onChange(n)}else e.onChange({escorts:null})}})}function v(e){var t=(0,a.useMemo)((function(){return[{label:"\uc804\uccb4",value:void 0},{label:"\uc77c\ubc18",value:c.l9.Normal},{label:"VIP",value:c.l9.Vip}]}),[]);return(0,i.jsx)(f.Z,{title:"\ud658\uc790\ud0c0\uc785(\uc77c\ubc18/VIP)",options:t,onChangeValue:function(t){if(t){var n={type:t};e.onChange(n)}else e.onChange({type:null})}})}},92513:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(85893),o=n(96156),u=n(87757),i=n.n(u),s=n(92137),a=n(67294),l=n(91342),c=n(9844),f=n(26381),p=n(67102),d=n(282),v=n(41749),h=n(64436),j=n(96019),b=n(67162),m=n(30553),y=n(40074),O=n(87329),x=n(52663),g=n(66083),Z=n(29525),w=n(55517),P=n(66856),C=n(36620),k=n(99457),S=n(34699),A=n(46829),D=n(32465);function R(){var e=(0,D.Z)(["\n    mutation UpsertPatient($where: PatientWhereUniqueInput!, $create: PatientCreateInput!, $update: PatientUpdateInput!) {\n        upsertPatient(where: $where, create: $create, update: $update) {\n            id\n            user {\n                id\n                name\n                phoneNum\n                defaultPaymentMethodId\n            }\n            formResults(orderBy: {priority: desc}) {\n                id\n                title\n                outputs(orderBy: {priority: desc}) {\n                    id\n                    type\n                    label\n                    values\n                }\n            }\n            type\n        }\n    }\n"]);return R=function(){return e},e}var E=(0,n(33121).ZP)(R());var _=n(41120),I=n(62822),V=n(96837),N=n(19608);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=(0,_.Z)((function(e){return{list_sub_header:{backgroundColor:"white"}}}));function $(e){var t,n,o,u=W(),i=(0,a.useState)(),s=i[0],l=i[1],c=function(t){l((function(n){var r,o,u,i,s,a,l,c=null===(r=n)||void 0===r||null===(o=r.outputs)||void 0===o||null===(u=o.create)||void 0===u?void 0:u.findIndex((function(e){return(null===e||void 0===e?void 0:e.label)===(null===t||void 0===t?void 0:t.label)}));c>-1?n.outputs.create[c]=t:n=T(T({},n),{},{outputs:{create:((null===(l=n)||void 0===l?void 0:l.outputs)&&n.outputs.create||[]).concat(t)}});return{title:null===e||void 0===e||null===(i=e.form)||void 0===i?void 0:i.title,desc:null===e||void 0===e||null===(s=e.form)||void 0===s?void 0:s.desc,priority:null===e||void 0===e||null===(a=e.form)||void 0===a?void 0:a.priority,outputs:{create:(0,O.Z)(n.outputs.create.filter((function(e){var t,n;return void 0!==e&&(null===e||void 0===e||null===(t=e.values)||void 0===t||null===(n=t.set)||void 0===n?void 0:n.every((function(e){return void 0!==e})))})))}}}))};return(0,a.useEffect)((function(){e.onChange(s)}),[s]),(0,r.jsx)(I.Z,{subheader:(0,r.jsx)(V.Z,{disableSticky:!0,color:"primary",className:u.list_sub_header,children:null===e||void 0===e||null===(t=e.form)||void 0===t?void 0:t.title}),children:null===e||void 0===e||null===(n=e.form)||void 0===n||null===(o=n.inputs)||void 0===o?void 0:o.map((function(e){return(0,r.jsx)(N.Z,{input:e,onChange:c})}))})}var z=n(38001);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=(0,k.Z)(),n=t.Snack,o=t.showMessage,u=function(){return e.setOpen(!1)},l=(0,C.Z)(),c=l.fetchPatientResumeTemplate,f=l.patientResumeTemplate,v=function(){var e=(0,s.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({where:{type:p.l9.Vip}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){v()}),[]);var h=function(e){y((function(t){var n,r,o,u,i,s,a=null===(n=t)||void 0===n||null===(r=n.formResults)||void 0===r||null===(o=r.create)||void 0===o?void 0:o.findIndex((function(t){return(null===t||void 0===t?void 0:t.title)===(null===e||void 0===e?void 0:e.title)}));return a>-1?t.formResults.create[a]=e:t=F(F({},t),{},{formResults:{create:((null===(u=t)||void 0===u?void 0:u.formResults)&&t.formResults.create||[]).concat(e)}}),{type:p.l9.Vip,formResults:{create:(0,O.Z)(null===(i=t)||void 0===i||null===(s=i.formResults)||void 0===s?void 0:s.create.filter((function(e){return void 0!==e})))}}}))},j=function(){var e=(0,A.useMutation)(E),t=(0,S.Z)(e,2),n=t[0],r=t[1];function o(){return(o=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({variables:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.data,r.error,r.loading,{upsertPatient:function(e){return o.apply(this,arguments)}}}().upsertPatient,b=(0,a.useState)(),m=b[0],y=b[1],D=function(){var t=(0,s.Z)(i().mark((function t(){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(U(f.forms,m)){t.next=6;break}return o("(*) \ud544\uc218 \ud56d\ubaa9\uc744 \ubaa8\ub450 \uc785\ub825\ud574\uc8fc\uc138\uc694."),t.abrupt("return");case 6:return t.next=8,j({where:{id:""},create:m,update:{}});case 8:n=t.sent,r=n.data,u(),e.afterCraete(r.upsertPatient);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,r.jsxs)(x.Z,{fullWidth:!0,open:e.open,onClose:u,children:[(0,r.jsx)(g.Z,{children:"VIP \ud658\uc790\uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,r.jsxs)(Z.Z,{children:[!f&&(0,r.jsx)(z.Z,{}),f&&(0,r.jsxs)(r.Fragment,{children:[f.forms.map((function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{form:e,onChange:h}),(0,r.jsx)(w.Z,{})]})})),(0,r.jsx)(d.Z,{fullWidth:!0,variant:"contained",color:"secondary",onClick:D,children:" \ucd94\uac00 "})]})]}),(0,r.jsx)(P.Z,{children:(0,r.jsx)(d.Z,{onClick:u,children:"\ub2eb\uae30"})}),(0,r.jsx)(n,{})]})}function U(e,t){return e.every((function(e){var n;return null===e||void 0===e||null===(n=e.inputs)||void 0===n?void 0:n.every((function(n){var r,o;return!n.isRequired||(null===t||void 0===t||null===(r=t.formResults)||void 0===r||null===(o=r.create)||void 0===o?void 0:o.find((function(t){return t.title===e.title&&t.outputs.create.find((function(e){return e.label===n.label&&e.values.set.every((function(e){return e}))}))})))}))}))}var J=n(26658),X=n(24095),H=n(28738);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e){var t=(0,a.useState)(),n=t[0],o=t[1],u=(0,a.useState)(),O=u[0],x=u[1],g=(0,a.useState)(!1),Z=g[0],w=g[1],P=(0,a.useState)(!1),C=P[0],k=P[1],S=(0,a.useState)(new Date),A=S[0],D=S[1],R=(0,a.useState)(new Date),E=R[0],_=R[1],I=function(e){o((function(t){return{formResults:e.formResults||(null===t||void 0===t?void 0:t.formResults),escorts:null===e.escorts?void 0:e.escorts||(null===t||void 0===t?void 0:t.escorts),OR:e.type?e.type===p.l9.Vip?[{type:p.l9.Vip}]:[{type:p.l9.Default,user:{isClosedAccount:{equals:!1}}},{type:p.l9.Normal,user:{isClosedAccount:{equals:!1}}}]:[{type:p.l9.Default,user:{isClosedAccount:{equals:!1}}},{type:p.l9.Normal,user:{isClosedAccount:{equals:!1}}},{type:p.l9.Vip}]}}))},V=function(){var e=(0,s.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t),k(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=(0,a.useState)(),q=N[0],T=N[1],W=(0,a.useState)({createdAt:p.As.Asc}),$=W[0],z=W[1];return(0,a.useEffect)((function(){o((function(e){return K(K({},e),{},{createdAt:{gte:A.toISOString(),lte:E.toISOString()}})}))}),[A,E]),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.ZP,{actionComponent:(0,r.jsx)(c.v2,{}),title:"\ud658\uc790 \ubaa9\ub85d",position:"sticky",subActionComponent:(0,r.jsx)(d.Z,{onClick:function(){return w(!0)},variant:"outlined",color:"inherit",children:"VIP \ucd94\uac00"})}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(l.SA,{onChange:I}),(0,r.jsxs)(v.Z,{container:!0,spacing:3,children:[(0,r.jsx)(v.Z,{item:!0,children:(0,r.jsx)(H.Z,{label:"\ub4f1\ub85d\uc77c \uac80\uc0c9\uc2dc\uc791",day:H.J.START,onChange:function(e){D(e)}})}),(0,r.jsx)(v.Z,{item:!0,children:(0,r.jsx)(H.Z,{label:"\ub4f1\ub85d\uc77c \uac80\uc0c9\uc885\ub8cc",day:H.J.END,onChange:function(e){_(e)}})})]}),(0,r.jsx)(l.ko,{onChange:I}),(0,r.jsx)(l.FC,{onChange:I}),(0,r.jsxs)(h.Z,{component:"fieldset",size:"small",children:[(0,r.jsx)(j.Z,{component:"legend",children:"\uacb0\uacfc\ub0b4 \uc815\ub82c \uae30\uc900"}),(0,r.jsxs)(b.Z,{row:!0,value:q,onChange:function(e){var t=e.target.value;switch(T(t),t){case"\ucd5c\uc2e0\uc21c":z({createdAt:p.As.Desc});break;case"\uc624\ub798\ub41c\uc21c":z({createdAt:p.As.Asc});break;case"\u3131\u3134\u3137\uc21c":z({name:p.As.Asc});break;case"\u314e\u314d\u314c\uc21c":z({name:p.As.Desc})}},children:[(0,r.jsx)(m.Z,{value:"\ucd5c\uc2e0\uc21c",control:(0,r.jsx)(y.Z,{size:"small"}),label:"\ucd5c\uc2e0\uc21c"}),(0,r.jsx)(m.Z,{value:"\uc624\ub798\ub41c\uc21c",control:(0,r.jsx)(y.Z,{size:"small"}),label:"\uc624\ub798\ub41c\uc21c"}),(0,r.jsx)(m.Z,{value:"\u3131\u3134\u3137\uc21c",control:(0,r.jsx)(y.Z,{size:"small"}),label:"\u3131\u3134\u3137\uc21c"}),(0,r.jsx)(m.Z,{value:"\u314e\u314d\u314c\uc21c",control:(0,r.jsx)(y.Z,{size:"small"}),label:"\u314e\u314d\u314c\uc21c"})]})]}),(0,r.jsx)(X.Z,{orderBy:$,where:n,onClickRow:V}),(0,r.jsx)(B,{open:Z,setOpen:w,afterCraete:function(e){x(e),k(!0)}}),(0,r.jsx)(J.Z,{patient:O,open:C,setOpen:k})]})]})}},68882:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/patients",function(){return n(92513)}])}},function(e){e.O(0,[9774,3662,2678,4885,9351,1866,1769,8883,4593,110,5307,8286,953,3052,2079,2346,5537,6697,8696,5191,9081,5862,9120],(function(){return t=68882,e(e.s=t);var t}));var t=e.O();_N_E=t}]);