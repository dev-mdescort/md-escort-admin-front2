(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9443],{92137:function(e,t,n){"use strict";function a(e,t,n,a,i,r,o){try{var l=e[r](o),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(a,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function l(e){a(o,i,r,l,s,"next",e)}function s(e){a(o,i,r,l,s,"throw",e)}l(void 0)}))}}n.d(t,{Z:function(){return i}})},32465:function(e,t,n){"use strict";function a(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,{Z:function(){return a}})},85639:function(e,t,n){"use strict";var a=n(2949),i=n(96156),r=n(22122),o=n(67294),l=(n(45697),n(86010)),s=n(14670),u=n(50998),c=o.forwardRef((function(e,t){var n,i=e.classes,s=e.className,c=e.component,d=void 0===c?"li":c,m=e.disableGutters,v=void 0!==m&&m,f=e.ListItemClasses,p=e.role,h=void 0===p?"menuitem":p,g=e.selected,y=e.tabIndex,b=(0,a.Z)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==y?y:-1),o.createElement(u.Z,(0,r.Z)({button:!0,role:h,tabIndex:n,component:d,selected:g,disableGutters:v,classes:(0,r.Z)({dense:i.dense},f),className:(0,l.Z)(i.root,s,g&&i.selected,!v&&i.gutters),ref:t},b))}));t.Z=(0,s.Z)((function(e){return{root:(0,r.Z)({},e.typography.body1,(0,i.Z)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:(0,r.Z)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(c)},90941:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var a=n(85893),i=n(87757),r=n.n(i),o=n(92137),l=n(67294),s=n(66199),u=n(57714);function c(e){var t=(0,s.Z)(),n=t.fetchHospitals,i=t.hospitals,c=function(){var e=(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){c()}),[]);var d=(0,l.useMemo)((function(){return[{label:"\uc804\uccb4",value:void 0}].concat(i.map((function(e){return{label:e.name,value:e}})))}),[i]);return(0,a.jsx)(u.Z,{title:"\ubcd1\uc6d0",options:d,onChangeValue:function(t){e.onChange(t)}})}},61307:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var a=n(85893),i=n(41749),r=n(282),o=n(56847),l=n(82302),s=n(83750),u=n(57394),c=n(88222),d=n(99613),m=n(83461);function v(e){var t,n;return(0,a.jsxs)(i.Z,{container:!0,spacing:1,children:[(0,a.jsx)(i.Z,{item:!0,xs:12,children:(0,a.jsx)(r.Z,{variant:"contained",fullWidth:!0,disabled:!Boolean(null===(t=e.data)||void 0===t?void 0:t.length),children:e.data&&(0,a.jsxs)(m.CSVLink,{style:{width:"100%"},filename:"".concat(e.filename),headers:e.headers,data:e.data,children:[null===(n=e.data)||void 0===n?void 0:n.length,"\uac1c \ub370\uc774\ud130 \uc5d1\uc140\ub2e4\uc6b4\ub85c\ub4dc"]})})}),(0,a.jsx)(o.Z,{style:{maxHeight:"80vh"},children:(0,a.jsxs)(l.Z,{stickyHeader:!0,children:[(0,a.jsx)(f,{headers:e.headers}),(0,a.jsx)(p,{data:e.data,keys:e.headers.map((function(e){return e.key}))})]})})]})}var f=function(e){return(0,a.jsx)(s.Z,{children:(0,a.jsx)(u.Z,{children:e.headers.map((function(e){return(0,a.jsx)(c.Z,{align:"center",style:{minWidth:120,wordBreak:"keep-all"},children:e.label},e.key)}))})})},p=function(e){var t;return(0,a.jsx)(d.Z,{children:null===(t=e.data)||void 0===t?void 0:t.map((function(t){return(0,a.jsx)(u.Z,{children:e.keys.map((function(e){return(0,a.jsx)(c.Z,{align:"center",style:{minWidth:120,wordBreak:"keep-all"},children:t[e]})}))})}))})}},8137:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var a=n(85893),i=n(67294),r=n(61307),o=n(9844),l=n(76154),s=n(26381),u=n(67102),c=n(80008),d=n.n(c),m=n(48862),v=n(28333),f=n(3061),p=n(30143),h=n(49480),g=n(57714),y=n(22318),b=n(90941),Z={headers:[{label:"No",key:"number"},{label:"\ub0a0\uc9dc",key:"date"},{label:"\ubcd1\uc6d0\uba85",key:"hospitalName"},{label:"\uc758\ub8b0 vip \ub300\uc0c1\ud604\ud669",key:"clientName"},{label:"\ub4f1\ub85d\ubc88\ud638",key:"regNum"},{label:"\ud658\uc790\uc774\ub984",key:"patientName"},{label:"\uc131\ubcc4",key:"patientSex"},{label:"\ub098\uc774",key:"patientAge"},{label:"\uc9c4\ub8cc\uacfc/\uac80\uc0ac\ub0b4\uc6a9",key:"department"},{label:"\uc5d0\uc2a4\ucf54\ud130\uc774\ub984",key:"escorterName"},{label:"\uc11c\ube44\uc2a4\uc2dc\uc791\uc2dc\uac04",key:"startTime"},{label:"\uc11c\ube44\uc2a4\uc885\ub8cc\uc2dc\uac04",key:"endTime"},{label:"\ucd1d \uc11c\ube44\uc2a4 \uc2dc\uac04(\ubd84)",key:"elapsedMins"},{label:"\uacb0\uc81c\uae08\uc561",key:"feeAmount"},{label:"\uc5d0\uc2a4\ucf54\ud2b8 \uc720\ud615",key:"escortType"},{label:"\uc5d0\uc2a4\ucf54\ud130 \uae09\uc5ec\uc561",key:"totalWages"},{label:"\uc5e0\ub514\uc5d0\uc2a4\ucf54\ud2b8 \uc11c\ube44\uc2a4 \uc720\uc785\uacbd\ub85c",key:"marketChannel"}]};function k(e){var t=(0,i.useState)((new Date).getFullYear()),n=t[0],c=t[1],k=(0,i.useState)((new Date).getMonth()),w=k[0],j=k[1],S=(0,i.useState)(null),N=S[0],A=S[1],T=(0,l.Z)(),C=T.fetchEscortsWithOffset,I=T.escorts,_=(0,f.Z)().servicePolicy;return(0,i.useEffect)((function(){var e=d()(new Date(n,w,1)).toISOString(),t=d()(new Date(n,w+1,0)).toISOString();C({variables:{where:{hospitalId:N?{equals:N.id}:void 0,patient:{type:u.l9.Vip},startServingTime:{gte:e,lte:t},OR:[{status:u.ZA.OpinionSubmitted},{status:u.ZA.Completed},{status:u.ZA.Reviewed}]},orderBy:{startServingTime:u.As.Asc}}})}),[w,n,N]),(0,a.jsxs)(s.Z,{Navigation:(0,a.jsx)(o.ZP,{title:"VIP \uc758\uc804 \ud1b5\uacc4",actionComponent:(0,a.jsx)(o.v2,{}),variant:"outlined"}),children:[(0,a.jsx)(b.U,{onChange:function(e){A(e)}}),(0,a.jsx)(g.Z,{title:"\uc5f0",options:Array.from(Array(30)).map((function(e,t){return{value:(new Date).getFullYear()-t,label:(new Date).getFullYear()-t}})),onChangeValue:function(e){c(e)}}),(0,a.jsx)(g.Z,{title:"\uc6d4",options:Array.from(Array(12)).map((function(e,t){return{value:t,label:t+1}})),onChangeValue:function(e){j(e)}}),(0,a.jsxs)(y.Z,{children:[(null===I||void 0===I?void 0:I.length)||0,"\uac74"]}),(0,a.jsx)(r.Z,{filename:"".concat((null===N||void 0===N?void 0:N.name)||""," VIP\uc758\uc804 \ud604\ud669 (").concat(n,"\ub144 ").concat(w+1,"\uc6d4)"),headers:Z.headers,data:null===I||void 0===I?void 0:I.map((function(e,t){var n,a;return{number:t+1,date:new Date(e.startServingTime).toLocaleDateString("ko"),hospitalName:null===e||void 0===e||null===(n=e.hospital)||void 0===n?void 0:n.name,clientName:null===(a=e.patient.user)||void 0===a?void 0:a.name,patientName:(0,m.DF)(e.patient),patientSex:(0,m.po)(e.patient),patientAge:(0,m.qX)(e.patient),department:(0,m.Oi)(e.patient),escorterName:e.escorter.name,startTime:x(e.startServingTime),endTime:x(e.endServingTime),elapsedMins:(0,v.Z)({escort:e}),feeAmount:function(){var t,n;return null!==e&&void 0!==e&&null!==(t=e.payment)&&void 0!==t&&t.amount?null===e||void 0===e?void 0:e.payment.amount:null!==e&&void 0!==e&&null!==(n=e.payment)&&void 0!==n&&n.totalAmount?null===e||void 0===e?void 0:e.payment.totalAmount:(0,p.Z)({start:e.startServingTime,end:e.endServingTime,countAfter:60,feePerHour:null===_||void 0===_?void 0:_.defaultAdditionalWage,unit:10})+(null===_||void 0===_?void 0:_.defaultWage)}(),escortType:(0,h.o7)(e),totalWages:Math.floor((0,v.Z)({escort:e})/60*e.hourlyWage)||"\ubb34",marketChannel:""}}))})]})}var x=function(e){var t=new Date(e);return"".concat(t.getHours(),": ").concat(t.getMinutes().toLocaleString("kr",{minimumIntegerDigits:2}))}},63702:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/summary/monthlyVips",function(){return n(8137)}])}},function(e){e.O(0,[9774,3662,2678,4885,9351,1866,1769,8883,4593,953,2346,5191,9081],(function(){return t=63702,e(e.s=t);var t}));var t=e.O();_N_E=t}]);