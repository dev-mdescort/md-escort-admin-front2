(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7822],{90941:function(e,t,n){"use strict";n.d(t,{U:function(){return c}});var a=n(85893),i=n(87757),r=n.n(i),l=n(92137),o=n(67294),s=n(66199),u=n(57714);function c(e){var t=(0,s.Z)(),n=t.fetchHospitals,i=t.hospitals,c=function(){var e=(0,l.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){c()}),[]);var d=(0,o.useMemo)((function(){return[{label:"\uc804\uccb4",value:void 0}].concat(i.map((function(e){return{label:e.name,value:e}})))}),[i]);return(0,a.jsx)(u.Z,{title:"\ubcd1\uc6d0",options:d,onChangeValue:function(t){e.onChange(t)}})}},1652:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(85893),i=n(64436),r=n(96019),l=n(67162),o=n(30553),s=n(40074),u=n(67294),c=n(67102);function d(e){var t=(0,u.useState)("ALL"),n=t[0],d=t[1];return(0,a.jsxs)(i.Z,{component:"fieldset",size:"small",children:[(0,a.jsx)(r.Z,{component:"legend",children:"\ud658\uc790 \ud0c0\uc785"}),(0,a.jsxs)(l.Z,{row:!0,value:n,onChange:function(t){var n=t.target.value;d(n),e.onChange(n)},children:[(0,a.jsx)(o.Z,{value:"ALL",control:(0,a.jsx)(s.Z,{size:"small"}),label:"\uc804\uccb4"}),(0,a.jsx)(o.Z,{value:c.l9.Normal,control:(0,a.jsx)(s.Z,{size:"small"}),label:"\uc77c\ubc18"}),(0,a.jsx)(o.Z,{value:c.l9.Vip,control:(0,a.jsx)(s.Z,{size:"small"}),label:"VIP"})]})]})}},28738:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},J:function(){return a}});var a,i=n(85893),r=n(87827),l=n(3864),o=n(29559),s=n(42867),u=n(67294);function c(e){var t=e.day,n=void 0===t?a.START:t,c=(0,u.useState)(e.defaultDate?new Date(e.defaultDate):new Date),d=c[0],m=c[1];return(0,i.jsx)(r.M,{utils:o.Z,locale:s.Z,children:(0,i.jsx)(l.M,{value:d,onChange:function(t){switch(n){case a.START:t.setHours(0,0,0,0);break;case a.END:t.setHours(23,59,59,999)}m(t),e.onChange(t)},label:e.label,format:"yyyy/MM/dd"})})}!function(e){e.END="END",e.START="START"}(a||(a={}))},61307:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var a=n(85893),i=n(41749),r=n(282),l=n(56847),o=n(82302),s=n(83750),u=n(57394),c=n(88222),d=n(99613),m=n(83461);function f(e){var t,n;return(0,a.jsxs)(i.Z,{container:!0,spacing:1,children:[(0,a.jsx)(i.Z,{item:!0,xs:12,children:(0,a.jsx)(r.Z,{variant:"contained",fullWidth:!0,disabled:!Boolean(null===(t=e.data)||void 0===t?void 0:t.length),children:e.data&&(0,a.jsxs)(m.CSVLink,{style:{width:"100%"},filename:"".concat(e.filename),headers:e.headers,data:e.data,children:[null===(n=e.data)||void 0===n?void 0:n.length,"\uac1c \ub370\uc774\ud130 \uc5d1\uc140\ub2e4\uc6b4\ub85c\ub4dc"]})})}),(0,a.jsx)(l.Z,{style:{maxHeight:"80vh"},children:(0,a.jsxs)(o.Z,{stickyHeader:!0,children:[(0,a.jsx)(v,{headers:e.headers}),(0,a.jsx)(h,{data:e.data,keys:e.headers.map((function(e){return e.key}))})]})})]})}var v=function(e){return(0,a.jsx)(s.Z,{children:(0,a.jsx)(u.Z,{children:e.headers.map((function(e){return(0,a.jsx)(c.Z,{align:"center",style:{minWidth:120,wordBreak:"keep-all"},children:e.label},e.key)}))})})},h=function(e){var t;return(0,a.jsx)(d.Z,{children:null===(t=e.data)||void 0===t?void 0:t.map((function(t){return(0,a.jsx)(u.Z,{children:e.keys.map((function(e){return(0,a.jsx)(c.Z,{align:"center",style:{minWidth:120,wordBreak:"keep-all"},children:t[e]})}))})}))})}},52760:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var a=n(85893),i=n(41749),r=n(95477),l=n(67294),o=n(30143),s=n(90941),u=n(1652),c=n(28738),d=n(61307),m=n(9844),f=n(76154),v=n(3061),h=n(26381),p=n(67102),y=n(49480),g=n(28333),x=n(48862);function Z(){var e=(0,l.useState)(new Date),t=e[0],n=e[1],o=(0,l.useState)(new Date),d=o[0],v=o[1],y=(0,l.useState)(),g=y[0],x=y[1],Z=(0,l.useState)(),k=Z[0],b=Z[1],S=(0,f.Z)(),T=S.fetchEscortsWithOffset,w=S.escorts,A=S.loading;return(0,l.useEffect)((function(){T({variables:{where:{patient:"ALL"!==k?{type:k}:void 0,hospitalId:g?{equals:g.id}:void 0,startServingTime:{gte:t.toISOString(),lte:d.toISOString()},OR:[{status:p.ZA.OpinionSubmitted},{status:p.ZA.Completed},{status:p.ZA.Reviewed}]},orderBy:{startServingTime:p.As.Asc}}})}),[t,d,g,k]),(0,a.jsx)(h.Z,{Navigation:(0,a.jsx)(m.ZP,{title:"\uc5d0\uc2a4\ucf54\ud2b8 \ud1b5\uacc4",actionComponent:(0,a.jsx)(m.v2,{}),variant:"outlined"}),children:(0,a.jsxs)(i.Z,{container:!0,spacing:3,children:[(0,a.jsxs)(i.Z,{item:!0,container:!0,spacing:3,children:[(0,a.jsx)(i.Z,{item:!0,children:(0,a.jsx)(c.Z,{label:"\uac80\uc0c9\uc2dc\uc791\uc77c",day:c.J.START,onChange:function(e){n(e)}})}),(0,a.jsx)(i.Z,{item:!0,children:(0,a.jsx)(c.Z,{label:"\uac80\uc0c9\uc885\ub8cc\uc77c",day:c.J.END,onChange:function(e){v(e)}})})]}),(0,a.jsx)(i.Z,{container:!0,item:!0,style:{width:"100%"},children:(0,a.jsx)(s.U,{onChange:function(e){x(e)}})}),(0,a.jsx)(i.Z,{item:!0,xs:6,children:(0,a.jsx)(u.Z,{onChange:function(e){b(e)}})}),(0,a.jsx)(i.Z,{item:!0,style:{width:"100%"},children:A||!w?(0,a.jsx)(r.Z,{}):(0,a.jsx)(j,{escorts:w,filename:"\uc5d0\uc2a4\ucf54\ud2b8\ud604\ud669(".concat(t.toLocaleDateString(),"~").concat(d.toLocaleDateString(),")")})})]})})}var j=function(e){var t=(0,v.Z)().servicePolicy;return(0,a.jsx)(d.Z,{filename:e.filename,headers:[{label:"No",key:"number"},{label:"\ub0a0\uc9dc",key:"date"},{label:"\ubcd1\uc6d0",key:"hospitalName"},{label:"\ud658\uc790\uc720\ud615(VIP/\ubb34\ub8cc/\uc720\ub8cc)",key:"patientType"},{label:"\uc758\ub8b0 VIP \ub300\uc0c1\ud604\ud669",key:"clientTarget"},{label:"\ub4f1\ub85d\ubc88\ud638",key:"regNum"},{label:"\ud658\uc790\uc774\ub984",key:"patientName"},{label:"\uc131\ubcc4",key:"patientSex"},{label:"\ub098\uc774",key:"patientAge"},{label:"\uc9c4\ub8cc\uacfc/\uac80\uc0ac\ub0b4\uc6a9",key:"department"},{label:"\uc5d0\uc2a4\ucf54\ud130\uc774\ub984",key:"escorterName"},{label:"\uc11c\ube44\uc2a4\uc2dc\uc791\uc2dc\uac04",key:"startTime"},{label:"\uc11c\ube44\uc2a4\uc885\ub8cc\uc2dc\uac04",key:"endTime"},{label:"\ucd1d \uc11c\ube44\uc2a4 \uc2dc\uac04(\ubd84)",key:"elapsedMins"},{label:"\uacb0\uc81c\uae08\uc561",key:"feeAmount"},{label:"\uc5d0\uc2a4\ucf54\ud130 \uae09\uc5ec\ub4f1\uae09",key:"escortType"},{label:"\uc5d0\uc2a4\ucf54\ud130 \uae09\uc5ec\uc561",key:"totalWages"},{label:"\ubb34\ub8cc\uccb4\ud5d8 \ud658\ubd88\ucc98\ub9ac",key:"isRefunded"},{label:"\uc5e0\ub514\uc5d0\uc2a4\ucf54\ud2b8 \uc11c\ube44\uc2a4 \uc720\uc785\uacbd\ub85c",key:"marketChannel"}],data:e.escorts.map((function(e,n){var a,i;return{number:n+1,date:new Date(e.startServingTime).toLocaleDateString("ko"),hospitalName:null===e||void 0===e||null===(a=e.hospital)||void 0===a?void 0:a.name,patientType:(0,x.Xw)(e.patient),clientTarget:"",regNum:"",patientName:(0,x.DF)(e.patient),patientSex:(0,x.po)(e.patient),patientAge:(0,x.qX)(e.patient),department:(0,x.Oi)(e.patient),escorterName:e.escorter.name,startTime:b(e.startServingTime),endTime:b(e.endServingTime),elapsedMins:(0,g.Z)({escort:e}),feeAmount:0==k(null===e||void 0===e||null===(i=e.payment)||void 0===i?void 0:i.amount)?function(){var n,a;return null!==e&&void 0!==e&&null!==(n=e.payment)&&void 0!==n&&n.amount?null===e||void 0===e?void 0:e.payment.amount:null!==e&&void 0!==e&&null!==(a=e.payment)&&void 0!==a&&a.totalAmount?null===e||void 0===e?void 0:e.payment.totalAmount:(0,o.Z)({start:e.startServingTime,end:e.endServingTime,countAfter:60,feePerHour:null===t||void 0===t?void 0:t.defaultAdditionalWage,unit:10})+(null===t||void 0===t?void 0:t.defaultWage)}():0,escortType:(0,y.o7)(e),totalWages:(0,g.Z)({escort:e})/60*e.hourlyWage||"\ubb34",isRefunded:"",marketChannel:""}}))})},k=function(e){return null===e||0===e},b=function(e){var t=new Date(e);return"".concat(t.getHours(),": ").concat(t.getMinutes().toLocaleString("kr",{minimumIntegerDigits:2}))}},41595:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/summary/monthlyEscorts",function(){return n(52760)}])}},function(e){e.O(0,[9774,3662,2678,4885,9351,1866,1769,8883,4593,110,8286,953,3052,2346,8086,5191,9081],(function(){return t=41595,e(e.s=t);var t}));var t=e.O();_N_E=t}]);